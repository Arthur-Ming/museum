const slider=new Swiper(".welcome-slider",{effect:"coverflow",speed:600,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}}),pag=document.querySelector(".pagination-current");document.querySelector(".swiper-slide-active").addEventListener("transitionend",()=>{const e=Number(document.querySelector(".swiper-slide-active").dataset.swiperSlideIndex);pag.innerHTML="0"+(e+1)});const swiper=new Swiper(".videoslider2",{spaceBetween:20,slidesPerView:2,slidesPerGroup:1,watchSlidesProgress:!0,breakpoints:{770:{slidesPerView:3,spaceBetween:42}}}),swiper2=new Swiper(".videoslider",{spaceBetween:10,loop:!0,navigation:{nextEl:".video__next",prevEl:".video__prev"},pagination:{el:".videoslider2-pagination",clickable:!0},thumbs:{swiper:swiper}}),cards=document.querySelectorAll(".gallery__card");for(let e=0;e<15;e++){const e=Math.floor(15*Math.random()),t=Math.floor(15*Math.random()),o=cards[e].innerHTML;cards[e].innerHTML=cards[t].innerHTML,cards[t].innerHTML=o}class BookingToggle{ticketButton=document.getElementById("tickets-button");booking=document.querySelector(".booking");bookingClose=document.querySelector(".booking__close");onTicketButtonClick=()=>{this.booking.classList.add("booking__show")};onBookingClose=()=>{this.booking.classList.remove("booking__show")};onClickOutside=e=>{e.target.closest(".booking__box")||this.booking.classList.contains("booking__show")&&this.booking.classList.remove("booking__show")};constructor(){this.initEventListeners()}initEventListeners(){this.ticketButton.addEventListener("click",this.onTicketButtonClick),this.bookingClose.addEventListener("click",this.onBookingClose),document.addEventListener("click",this.onClickOutside,!0)}}const bookingToggle=new BookingToggle;function createRipple(e){const t=e.currentTarget,o=document.createElement("span"),n=Math.max(t.clientWidth,t.clientHeight),i=n/2;o.style.left=e.clientX-t.getBoundingClientRect().x-i+"px",o.style.top=e.clientY-t.getBoundingClientRect().y-i+"px",o.style.width=o.style.height=n+"px",o.classList.add("ripple");const s=t.getElementsByClassName("ripple")[0];s&&s.remove(),t.appendChild(o)}const buttons=document.querySelector(".tickets__button");buttons.addEventListener("click",createRipple);const thumb=document.querySelector(".explore__curtain"),exploreImages=document.querySelector(".explore__images"),exploreImageAfter=document.querySelector(".explore__image_after");exploreImageAfter.style.width=thumb.getBoundingClientRect().left-exploreImages.getBoundingClientRect().left+thumb.clientWidth/2+"px",thumb.addEventListener("pointerdown",e=>{e.preventDefault();let t=e.clientX-thumb.getBoundingClientRect().left;function o(e){let o=e.clientX-t-exploreImages.getBoundingClientRect().left;o<0&&(o=0);let n=exploreImages.offsetWidth-thumb.offsetWidth;o>n&&(o=n),thumb.style.left=o+"px",exploreImageAfter.style.width=o+thumb.clientWidth/2+"px"}document.addEventListener("pointermove",o),document.addEventListener("pointerup",(function e(){document.removeEventListener("pointerup",e),document.removeEventListener("pointermove",o)}))});var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE "),isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};function isIE(){return(ua=navigator.userAgent).indexOf("MSIE ")>-1||ua.indexOf("Trident/")>-1}function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function ibg(){if(isIE()){let t=document.querySelectorAll("._ibg");for(var e=0;e<t.length;e++)t[e].querySelector("img")&&null!=t[e].querySelector("img").getAttribute("src")&&(t[e].style.backgroundImage="url("+t[e].querySelector("img").getAttribute("src")+")")}}isIE()&&document.querySelector("body").classList.add("ie"),isMobile.any()&&document.querySelector("body").classList.add("_touch"),testWebP((function(e){1==e?document.querySelector("body").classList.add("_webp"):document.querySelector("body").classList.add("_no-webp")})),ibg(),document.querySelector(".wrapper")&&document.querySelector(".wrapper").classList.add("_loaded");let title=document.querySelectorAll("._letter-animation");if(title)for(let e=0;e<title.length;e++){let t=title[e],o=t.innerHTML.replace("  "," ").split(" "),n="";for(let e=0;e<o.length;e++){let i=o[e],s=i.length;n+="<p>";for(let e=0;e<s;e++){let t=i.substr(e,1);" "==t&&(t="&nbsp;"),n=n+"<span>"+t+"</span>"}t.innerHTML=n,n+="&nbsp;</p>"}}let tabs=document.querySelectorAll("._tabs");for(let e=0;e<tabs.length;e++){let t=tabs[e],o=t.querySelectorAll("._tabs-item"),n=t.querySelectorAll("._tabs-block");for(let e=0;e<o.length;e++){let t=o[e];t.addEventListener("click",(function(i){for(let e=0;e<o.length;e++){o[e].classList.remove("_active"),n[e].classList.remove("_active")}t.classList.add("_active"),n[e].classList.add("_active"),i.preventDefault()}))}}let spollers=document.querySelectorAll("._spoller"),spollersGo=!0;if(spollers.length>0)for(let e=0;e<spollers.length;e++){const t=spollers[e];t.addEventListener("click",(function(e){if(spollersGo){if(spollersGo=!1,t.classList.contains("_spoller-992")&&window.innerWidth>992)return!1;if(t.classList.contains("_spoller-768")&&window.innerWidth>768)return!1;if(t.closest("._spollers").classList.contains("_one")){let e=t.closest("._spollers").querySelectorAll("._spoller");for(let o=0;o<e.length;o++){let n=e[o];n!=t&&(n.classList.remove("_active"),_slideUp(n.nextElementSibling))}}t.classList.toggle("_active"),_slideToggle(t.nextElementSibling),setTimeout((function(){spollersGo=!0}),500)}}))}let gallery=document.querySelectorAll("._gallery");function gallery_init(){for(let e=0;e<gallery.length;e++){const t=gallery[e];lightGallery(t,{counter:!1,selector:"a",download:!1})}}function search_in_list(e){let t=e.parentNode.querySelector("ul").querySelectorAll("li"),o=e.value.toUpperCase();for(i=0;i<t.length;i++){let e=t[i],n=e;txtValue=n.textContent||n.innerText,txtValue.toUpperCase().indexOf(o)>-1?e.style.display="":e.style.display="none"}}function digi(e){return e.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}function digi_animate(e){if(e.length>0)for(let t=0;t<e.length;t++){const o=e[t],n=parseInt(o.innerHTML.replace(" ",""));o.classList.contains("_done")||digi_animate_value(o,0,n,1500)}}function digi_animate_value(e,t,o,n){var i=e,s=o-t,r=Math.abs(Math.floor(n/s));r=Math.max(r,50);var l,c=(new Date).getTime()+n;function a(){var e=(new Date).getTime(),t=Math.max((c-e)/n,0),r=Math.round(o-t*s);i.innerHTML=digi(r),r==o&&clearInterval(l)}l=setInterval(a,r),a(),e.classList.add("_done")}gallery&&gallery_init();let _slideUp=(e,t=500)=>{e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t)},_slideDown=(e,t=500)=>{e.style.removeProperty("display");let o=window.getComputedStyle(e).display;"none"===o&&(o="block"),e.style.display=o;let n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t)},_slideToggle=(e,t=500)=>{if(!e.classList.contains("_slide"))return e.classList.add("_slide"),"none"===window.getComputedStyle(e).display?_slideDown(e,t):_slideUp(e,t)};function _wrap(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)}function _removeClasses(e,t){for(var o=0;o<e.length;o++)e[o].classList.remove(t)}function _is_hidden(e){return null===e.offsetParent}function animate({timing:e,draw:t,duration:o}){let n=performance.now();requestAnimationFrame((function i(s){let r=(s-n)/o;r>1&&(r=1);let l=e(r);t(l),r<1&&requestAnimationFrame(i)}))}function makeEaseOut(e){return function(t){return 1-e(1-t)}}function makeEaseInOut(e){return function(t){return t<.5?e(2*t)/2:(2-e(2*(1-t)))/2}}function quad(e){return Math.pow(e,2)}function circ(e){return 1-Math.sin(Math.acos(e))}Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);let selects=document.getElementsByTagName("select");function selects_init(){for(let e=0;e<selects.length;e++){select_init(selects[e])}document.addEventListener("click",(function(e){selects_close(e)})),document.addEventListener("keydown",(function(e){"Escape"===e.code&&selects_close(e)}))}function selects_close(e){const t=document.querySelectorAll(".select");if(!e.target.closest(".select"))for(let e=0;e<t.length;e++){const o=t[e],n=o.querySelector(".select__options");o.classList.remove("_active"),_slideUp(n,100)}}function select_init(e){const t=e.parentElement,o=e.getAttribute("class"),n=e.querySelector("option:checked");e.setAttribute("data-default",n.value),e.style.display="none",t.insertAdjacentHTML("beforeend",'<div class="select select_'+o+'"></div>'),e.parentElement.querySelector(".select").appendChild(e),select_item(e)}function select_item(e){const t=e.parentElement,o=t.querySelector(".select__item"),n=e.querySelectorAll("option"),i=e.querySelector("option:checked").text,s=e.getAttribute("data-type");o&&o.remove();let r="";r="input"==s?'<div class="select__value icon-select-arrow"><input autocomplete="off" type="text" name="form[]" value="'+i+'" data-error="Ошибка" data-value="'+i+'" class="select__input"></div>':'<div class="select__value icon-select-arrow"><span>'+i+"</span></div>",t.insertAdjacentHTML("beforeend",'<div class="select__item"><div class="select__title">'+r+'</div><div class="select__options">'+select_get_options(n)+"</div></div></div>"),select_actions(e,t)}function select_actions(e,t){const o=t.querySelector(".select__item"),n=t.querySelector(".select__options"),i=t.querySelectorAll(".select__option"),s=e.getAttribute("data-type"),r=t.querySelector(".select__input");o.addEventListener("click",(function(){let e=document.querySelectorAll(".select");for(let t=0;t<e.length;t++){const n=e[t],i=n.querySelector(".select__options");n!=o.closest(".select")&&(n.classList.remove("_active"),_slideUp(i,100))}_slideToggle(n,100),t.classList.toggle("_active")}));for(let t=0;t<i.length;t++){const o=i[t],n=o.getAttribute("data-value"),l=o.innerHTML;"input"==s?r.addEventListener("keyup",select_search):o.getAttribute("data-value")==e.value&&(o.style.display="none"),o.addEventListener("click",(function(){for(let e=0;e<i.length;e++){i[e].style.display="block"}"input"==s?(r.value=l,e.value=n):(e.value=n,o.style.display="none")}))}}function select_get_options(e){if(e){let t="";for(let o=0;o<e.length;o++){const n=e[o],i=n.value;if(""!=i){t=t+'<div data-value="'+i+'" class="select__option">'+n.text+"</div>"}}return t}}function select_search(e){e.target.closest(".select ").querySelector(".select__options");let t=e.target.closest(".select ").querySelectorAll(".select__option"),o=e.target.value.toUpperCase();for(let e=0;e<t.length;e++){let n=t[e];(n.textContent||n.innerText).toUpperCase().indexOf(o)>-1?n.style.display="":n.style.display="none"}}function selects_update_all(){let e=document.querySelectorAll("select");if(e)for(let t=0;t<e.length;t++){select_item(e[t])}}selects.length>0&&selects_init();const tickets={1:{type:"Permanent exhibition",price:20},2:{type:"Temporary exhibition",price:25},3:{type:"Combined Admission",price:40}};let bookingOptions={ticketType:1,quantity:{basic:2,senior:2}};sessionStorage.getItem("bookingOptions")&&(bookingOptions=JSON.parse(sessionStorage.getItem("bookingOptions")));const MIN=0,MAX=20,basic=document.getElementById("_basic"),basics=document.querySelectorAll("._basic"),seniors=document.querySelectorAll("._senior"),senior=document.getElementById("_senior"),totalBasic=document.getElementById("total-basic"),totalSenior=document.getElementById("total-senior"),quantityButtons=document.querySelectorAll(".quantity__button"),basicPrice=document.querySelectorAll(".basic-price"),seniorPrice=document.querySelectorAll(".senior-price"),totalPrice=document.querySelectorAll(".total-price");function setQuantity(){for(const e of basics)e.querySelector("input").value=bookingOptions.quantity.basic;for(const e of seniors)e.querySelector("input").value=bookingOptions.quantity.senior;sessionStorage.setItem("bookingOptions",JSON.stringify(bookingOptions))}function setOverview(){basic.innerHTML=bookingOptions.quantity.basic,senior.innerHTML=bookingOptions.quantity.senior;const e=totalBasic.innerHTML=tickets[bookingOptions.ticketType].price*bookingOptions.quantity.basic,t=totalSenior.innerHTML=tickets[bookingOptions.ticketType].price*bookingOptions.quantity.senior/2;for(const o of totalPrice)o.innerHTML=e+t;for(const e of basicPrice)e.innerHTML=tickets[bookingOptions.ticketType].price;for(const e of seniorPrice)e.innerHTML=tickets[bookingOptions.ticketType].price/2}setOverview(),setQuantity();for(const e of quantityButtons)e.addEventListener("click",(function(t){t.preventDefault();const o=e.closest(".quantity").querySelector("input");let n=parseInt(o.value);e.classList.contains("quantity__button_plus")&&(n++,n>20&&(n=20)),e.classList.contains("quantity__button_minus")&&(n-=1,n<0&&(n=0)),e.closest("._basic")&&(bookingOptions.quantity.basic=n),e.closest("._senior")&&(bookingOptions.quantity.senior=n),setQuantity(e),setOverview()}));const radio=document.querySelector(".tickets__radio"),ticketType=document.getElementById("ticket-type"),selectTtitle=document.querySelector(".select__value>span"),selectOptions=document.querySelector(".select__options"),value=bookingOptions.ticketType;function setSelect(e){const t=selectOptions.querySelectorAll(".select__option");for(const o of t)o.style.display="block",Number(o.dataset.value)===Number(e)&&(o.style.display="none")}selectTtitle.innerHTML=ticketType.innerHTML=tickets[value].type,setSelect(value),radio.elements[value-1].checked=!0,selectOptions.addEventListener("click",e=>{const t=e.target.closest(".select__option");if(t){const e=t.dataset.value;ticketType.innerHTML=tickets[e].type,selectTtitle.innerHTML=tickets[e].type,radio.elements[e-1].checked=!0,bookingOptions.ticketType=e,setSelect(e),setOverview(),sessionStorage.setItem("bookingOptions",JSON.stringify(bookingOptions))}}),radio.addEventListener("change",e=>{const t=Number(e.target.value);ticketType.innerHTML=tickets[t].type,selectTtitle.innerHTML=tickets[t].type,bookingOptions.ticketType=t,setSelect(t),setOverview(),sessionStorage.setItem("bookingOptions",JSON.stringify(bookingOptions))});const btime=document.getElementById("b-time"),bdate=document.getElementById("b-date"),overviewTime=document.getElementById("overview-time"),overviewDate=document.getElementById("overview-date"),date=new Date;function email_test(e){return/^[-\w]{3,15}@\w{4,}\.\w{2,}$/.test(e.value)}bdate.min=date.toISOString().split("T")[0],btime.addEventListener("change",e=>{overviewTime.innerHTML=e.target.value.split(":").join(" : ")}),bdate.addEventListener("change",e=>{const t=new Date(e.target.value);overviewDate.innerHTML=t.toLocaleString("eng",{month:"long",day:"2-digit",weekday:"long"})});const email=document.getElementById("email"),emailErrorText=document.querySelector(".email-error-text");function username_test(e){return/^[\s\p{L}]{3,15}$/u.test(e.value)}email.addEventListener("focus",()=>{document.removeEventListener("keydown",onkeydownHendler)}),email.addEventListener("blur",()=>{document.addEventListener("keydown",onkeydownHendler)}),email.addEventListener("input",e=>{email_test(e.target)?(email.classList.remove("input-error"),emailErrorText.classList.remove("email-error-text_show")):(email.classList.add("input-error"),emailErrorText.classList.add("email-error-text_show"))});const userName=document.getElementById("user-name"),usernameErrorText=document.querySelector(".username-error-text");userName.addEventListener("focus",()=>{document.removeEventListener("keydown",onkeydownHendler)}),userName.addEventListener("blur",()=>{document.addEventListener("keydown",onkeydownHendler)}),userName.addEventListener("input",e=>{username_test(e.target)?(userName.classList.remove("input-error"),usernameErrorText.classList.remove("username-error-text_show")):(userName.classList.add("input-error"),usernameErrorText.classList.add("username-error-text_show"))});const tel=document.getElementById("tel"),telErrorText=document.querySelector(".tel-error-text");function tel_test(e){return/^[0-9]{2,3}[ -]?[0-9]{2,3}[ -]?[0-9]{2,3}[ -]?[0-9]{2,3}[ -]?([0-9]{2,3}[ -]?)?$/.test(e.value)}function tel_test_length(e){return e.value.split("").filter(e=>"-"!==e&&" "!==e).length<=10}tel.addEventListener("focus",()=>{document.removeEventListener("keydown",onkeydownHendler)}),tel.addEventListener("blur",()=>{document.addEventListener("keydown",onkeydownHendler)}),tel.addEventListener("input",e=>{tel_test_length(e.target)&&tel_test(e.target)?(tel.classList.remove("input-error"),telErrorText.classList.remove("tel-error-text_show")):(tel.classList.add("input-error"),telErrorText.classList.add("tel-error-text_show"))});class Header{iconMenu=document.querySelector(".icon-menu");menuBody=document.querySelector(".header__nav");welcome=document.querySelector(".welcome");br=1200;onIconMenuClick=()=>{this.iconMenu.classList.toggle("_active"),this.menuBody.classList.toggle("_active"),this.welcome.classList.toggle("_active")};onMenuBodyClick=e=>{if(document.documentElement.clientWidth>this.br)return;e.target.closest(".nav__item>a")&&(this.menuBody.classList.remove("_active"),this.iconMenu.classList.remove("_active"),this.welcome.classList.remove("_active"))};onResize=()=>{this.menuBody.classList.contains("_active")&&document.documentElement.clientWidth>this.br&&(this.menuBody.classList.remove("_active"),this.iconMenu.classList.remove("_active"),this.welcome.classList.remove("_active"))};onClickOutside=e=>{e.target.closest(".header")||(this.menuBody.classList.remove("_active"),this.iconMenu.classList.remove("_active"),this.welcome.classList.remove("_active"))};constructor(){this.initEventListeners()}initEventListeners(){this.iconMenu.addEventListener("click",this.onIconMenuClick),this.menuBody.addEventListener("click",this.onMenuBodyClick),window.addEventListener("resize",this.onResize),document.addEventListener("click",this.onClickOutside)}}const header=new Header;let currentVideo=document.querySelector(".swiper-slide-active>.video");const videoToggler=document.getElementById("video-toggle"),volumeToggler=document.getElementById("volume-toggle"),playButton=document.querySelector(".video__start"),progressBar=document.querySelector(".video--progress-video"),volume=document.querySelector(".video--loud"),videoCurrentSpeed=document.querySelector(".video__current-speed");let isStop=!0,isVolume=!0;function stopVideo(){currentVideo.pause();progressBar.value=0,progressBar.style.background="linear-gradient(to right, #710707 0%, #710707 0%, #C4C4C4 0%, #C4C4C4 100%)",currentVideo.currentTime=0,isStop=!0,videoToggler.classList.remove("_pause"),playButton.classList.remove("_pause")}function onVolumeToggler(){volumeToggler.classList.toggle("_not-vol"),isVolume=!isVolume;const e=isVolume?40:0;volume.value=e,currentVideo.volume=e/100,volume.style.background=`linear-gradient(to right, #710707 0%, #710707 ${e}%, #C4C4C4 ${e}%, #C4C4C4 100%)`}function showCurrentSpeed(e,t=videoCurrentSpeed){t.classList.add("is-show-speed"),t.innerHTML=e,setTimeout(()=>{t.classList.remove("is-show-speed")},1e3)}function play(){isStop?currentVideo.play():currentVideo.pause(),isStop=!isStop,videoToggler.classList.toggle("_pause"),playButton.classList.toggle("_pause")}function videoVolume(){const e=Number(this.value);let t;0===e?(isVolume=!1,volumeToggler.classList.add("_not-vol"),t=0):(isVolume=!0,volumeToggler.classList.remove("_not-vol"),t=e),currentVideo.volume=t/100,this.style.background=`linear-gradient(to right, #710707 0%, #710707 ${t}%, #C4C4C4 ${t}%, #C4C4C4 100%)`}function onVideoClick(){play()}function resetVideo(){stopVideo(),currentVideo.removeEventListener("timeupdate",onTimeUpdate),currentVideo.removeEventListener("click",onVideoClick),currentVideo=document.querySelector(".swiper-slide-active>.video"),currentVideo.addEventListener("timeupdate",onTimeUpdate),currentVideo.addEventListener("click",onVideoClick),currentVideo.volume=Number(volume.value)/100}progressBar.value=0;let shift="";function onkeydownHendler(e){"Space"===e.code&&currentVideo.currentTime&&(e.preventDefault(),play()),"KeyM"===e.code&&onVolumeToggler(),"KeyF"===e.code&&fullscreenToggle(),"Shift"===e.key&&(shift="Shift",document.addEventListener("keyup",()=>{shift=""})),"Period"===e.code&&(shift+="Period","ShiftPeriod"===shift&&currentVideo.currentTime&&(currentVideo.playbackRate<2&&(currentVideo.playbackRate+=.25),shift="",showCurrentSpeed(currentVideo.playbackRate))),"Comma"===e.code&&(shift+="Comma","ShiftComma"===shift&&currentVideo.currentTime&&(currentVideo.playbackRate>.25&&(currentVideo.playbackRate-=.25),shift="",showCurrentSpeed(currentVideo.playbackRate)))}function onTimeUpdate(){const e=this.currentTime/this.duration*100;progressBar.value=e,e>=100&&stopVideo(),progressBar.style.background=`linear-gradient(to right, #710707 0%, #710707 ${e}%, #C4C4C4 ${e}%, #C4C4C4 100%)`}progressBar.addEventListener("input",(function(){const e=this.value;this.style.background=`linear-gradient(to right, #710707 0%, #710707 ${e}%, #C4C4C4 ${e}%, #C4C4C4 100%)`;let t=Number(currentVideo.duration),o=Number(e);currentVideo.currentTime=t/100*o})),volume.addEventListener("input",videoVolume),volumeToggler.addEventListener("click",onVolumeToggler),videoToggler.addEventListener("click",play),playButton.addEventListener("click",play),currentVideo.addEventListener("timeupdate",onTimeUpdate),currentVideo.addEventListener("click",onVideoClick),document.querySelector(".videoslider__wrapper").addEventListener("transitionend",resetVideo),document.addEventListener("keydown",onkeydownHendler);const videosliderPanel=document.querySelector(".videoslider__panel"),videosliderWrapper=document.querySelector(".videoslider");function fullscreenToggle(){document.fullscreenElement?exitFullscreen("fs_section_video"):enterFullscreen("fs_section_video")}function enterFullscreen(e){var t=document.getElementById(e),o=function(e){console.log("!!!");document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement,document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled};t.addEventListener("webkitfullscreenchange",o),t.addEventListener("mozfullscreenchange",o),t.addEventListener("fullscreenchange",o),t.requestFullscreen?t.requestFullscreen():t.webkitrequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullscreen&&t.mozRequestFullScreen()}function exitFullscreen(e){document.cancelFullScreen()}document.getElementById("fs-button").addEventListener("click",fullscreenToggle),document.cancelFullScreen=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen;var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);const videosliderVideoItem=document.querySelectorAll(".videoslider__video-item"),videosliderItem=document.querySelectorAll(".videoslider__item"),arr=[];let done=!1,isFirstTimeStateChange=!0;function onYouTubeIframeAPIReady(){for(const e of videosliderVideoItem){let t=new YT.Player(e,{events:{onReady:e=>{window.addEventListener("click",t=>{e.target.pauseVideo()})},onStateChange:e=>{if(stopVideo(),!isFirstTimeStateChange){for(const t of arr)1!==t.getPlayerState()||t.id===e.target.id||done||t.pauseVideo();done=!done}isFirstTimeStateChange=!1}}});arr.push(t)}}mapboxgl.accessToken="pk.eyJ1IjoiYXJ0aHVyLW1pbmciLCJhIjoiY2t1amxyeThlMGw0eTJ3bzZ4bzd5cXk5NSJ9.RgNpohPUytRnYuf0rmRRDg";const map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",center:[2.3364,48.86091],zoom:15.75}),marker1=new mapboxgl.Marker({color:"#171717"}).setLngLat([2.3364,48.86091]).addTo(map),marker2=new mapboxgl.Marker({color:"#757575"}).setLngLat([2.3333,48.8602]).addTo(map),marker3=new mapboxgl.Marker({color:"#757575"}).setLngLat([2.3397,48.8607]).addTo(map),marker4=new mapboxgl.Marker({color:"#757575"}).setLngLat([2.333,48.8619]).addTo(map),marker5=new mapboxgl.Marker({color:"#757575"}).setLngLat([2.3365,48.8625]).addTo(map);map.on("load",()=>{map.addSource("mapillary",{type:"vector",tiles:["https://tiles.mapillary.com/maps/vtp/mly1_public/2/{z}/{x}/{y}"],minzoom:6,maxzoom:14}),map.addLayer({id:"mapillary",type:"line",source:"mapillary","source-layer":"sequence",layout:{"line-cap":"round","line-join":"round"},paint:{"line-opacity":.6,"line-color":"rgb(53, 175, 109)","line-width":2}},"road-label")}),map.addControl(new mapboxgl.NavigationControl),window.addEventListener("scroll",onScrolledBottom);const buttonUp=document.querySelector(".button-up"),gall=document.querySelector(".gallery");let h=document.documentElement.clientHeight,step=500,st=h/2;function onScrolledBottom(e){let t=gall.getBoundingClientRect().top;window.pageYOffset>h?buttonUp.classList.add("button-up_sh"):buttonUp.classList.remove("button-up_sh"),t<st&&gall.classList.add("gallery_hs-1"),t<st-step&&gall.classList.add("gallery_hs-2"),t<st-2*step&&gall.classList.add("gallery_hs-3"),t<st-3*step&&gall.classList.add("gallery_hs-4"),t<st-4*step&&gall.classList.add("gallery_hs-5"),t>st&&gall.classList.remove("gallery_hs-1"),t>st-step&&gall.classList.remove("gallery_hs-2"),t>st-2*step&&gall.classList.remove("gallery_hs-3"),t>st-3*step&&gall.classList.remove("gallery_hs-4"),t>st-4*step&&gall.classList.remove("gallery_hs-5")}document.documentElement.clientWidth<=1200&&(step=300),document.documentElement.clientWidth<=600&&(step=200),document.documentElement.clientWidth<=420&&(step=100),window.addEventListener("resize",()=>{h=document.documentElement.clientHeight,step=500,st=h/2,document.documentElement.clientWidth<=1200&&(step=300),document.documentElement.clientWidth<=600&&(step=200),document.documentElement.clientWidth<=420&&(step=100)}),buttonUp.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});